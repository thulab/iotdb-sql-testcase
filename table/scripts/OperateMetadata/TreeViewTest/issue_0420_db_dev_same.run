connect root/root;
//tc 【TIMECHODB-0420】  [ 树转表 ] tree 的db 与device 名称相同，创建view成功，查询view报错: 301: tree db name should at least be two level: root (预期查询成功）
set sql_dialect=tree;
drop database root.db;<<NULL;
drop database root.**;<<NULL;
drop device template t1;<<NULL;
drop device template t2;<<NULL;
unset ttl to root.db.**;<<NULL;
unset ttl to root.**;<<NULL;
unset ttl to root.db;<<NULL;
create database root.db;
insert into root.db(time,s0) values(1000,1.1);
insert into root.db(time,s1) values(2000,X'abcd');
show devices root.db;
drop database root.__system;<<null;
set sql_dialect=table;
drop database db;<<NULL;
create database db;
use db;
create or replace view db.v1(device_id string tag) as root.**;
select * from db.v1 order by time;<<sqlstate;
select * from db.v1;<<sqlstate;
show devices from db.v1;
count devices from db.v1;
create or replace view db.v1() as root.**;
select * from db.v1 order by time;
show devices from db.v1;
count devices from db.v1;
create or replace view db.v1() as root.db.**;
select * from db.v1 order by time;
show devices from db.v1;
count devices from db.v1;
drop view v1;
drop database db;
set sql_dialect=tree;
select * from root.db.*;
drop database root.db;

//tc extend
set sql_dialect=tree;
drop database root.db;<<NULL;
drop database root.test.g_0;<<NULL;
drop database root.**;<<NULL;
drop device template t1;<<NULL;
drop device template t2;<<NULL;
unset ttl to root.db.**;<<NULL;
unset ttl to root.**;<<NULL;
unset ttl to root.db;<<NULL;
unset ttl to root.test.**;<<NULL;
unset ttl to root.test.g_0;<<NULL;
create database root.test.g_0;
insert into root.test.g_0(time,s0) values(1000,1.1);
insert into root.test.g_0(time,s1) values(2000,X'abcd');
show devices root.test.g_0;
drop database root.__system;<<null;
set sql_dialect=table;
drop database db;<<NULL;
create database db;
use db;
create or replace view db.v1(device_id string tag) as root.**;
select * from db.v1 order by time;
show devices from db.v1;
count devices from db.v1;
create or replace view db.v1() as root.**;
select * from db.v1 order by time;
show devices from db.v1;
count devices from db.v1;
create or replace view db.v1() as root.test.g_0.**;
select * from db.v1 order by time;
show devices from db.v1;
count devices from db.v1;
create or replace view db.v1() as root.test.**;
select * from db.v1 order by time;
show devices from db.v1;
count devices from db.v1;
create or replace view db.v1(device_id string tag) as root.test.**;
select * from db.v1 order by time;
show devices from db.v1;
count devices from db.v1;
create or replace view db.v1(device_id string tag) as root.**;
select * from db.v1 order by time;
show devices from db.v1;
count devices from db.v1;
create or replace view db.v1(device_id string tag) as root.test.g_0.**;
select * from db.v1 order by time;
show devices from db.v1;
count devices from db.v1;
//tc no device_id but s1
create or replace view db.v1(s1 blob) as root.test.g_0.**;
select * from db.v1 order by time;
show devices from db.v1;
count devices from db.v1;
create or replace view db.v1(s1 blob) as root.test.**;
select * from db.v1 order by time;
show devices from db.v1;
count devices from db.v1;
create or replace view db.v1(s1 blob) as root.**;
select * from db.v1 order by time;
show devices from db.v1;
count devices from db.v1;
drop view v1;
drop database db;
set sql_dialect=tree;
select * from root.test.g_0.*;
drop database root.test.g_0;
